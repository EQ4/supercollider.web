<!DOCTYPE html>
<html lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Connect with SoundCloud</title>
    <script>
    
   function getQueryVariable(variable) {
    	var query = window.location.search.substring(1);
	    var vars = query.split('&');
    	for (var i = 0; i < vars.length; i++) {
	        var pair = vars[i].split('=');
        	if (decodeURIComponent(pair[0]) == variable) {
            return decodeURIComponent(pair[1]);
    	    }
	    }
	    console.log('Query variable %s not found', variable);
	}
    
    function onPageLoad()
    {
    	var sctoken = getQueryVariable("code");
    	console.log("sctoken: " + sctoken);
	    window.opener.sctoken = sctoken;
	    window.opener.setTimeout(window.opener.SC.connectCallback, 1);
    }
    
    </script>
  </head>
  <body onload="onPageLoad()">
    <b style="width: 100%; text-align: center;">This popup should automatically close in a few seconds</b>
  </body>
</html>